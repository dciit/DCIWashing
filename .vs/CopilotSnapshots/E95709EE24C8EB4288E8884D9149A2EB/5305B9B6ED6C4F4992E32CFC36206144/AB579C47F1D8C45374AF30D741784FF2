using System;
using System.Windows.Forms;

namespace DCIWashing
{
    internal static class Program
    { 
        [STAThread]
        static void Main()
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            
            // แสดง Login Dialog ก่อน
            FrmLogin loginForm = new FrmLogin();
            DialogResult loginResult = loginForm.ShowDialog();
            
            if (loginResult == DialogResult.OK && loginForm.IsLoginSuccessful)
            {
                // ตรวจสอบ SCAN MODE ที่เลือกและเปิดฟอร์มที่เหมาะสม
                if (loginForm.SelectedScanMode == "MODEL")
                {
                    // ถ้าเลือก MODEL ให้เปิด FrmScanByModel
                    FrmScanByModel modelForm = new FrmScanByModel(loginForm.LoggedInUserName);
                    Application.Run(modelForm);
                }
                else
                {
                    // ถ้าเลือก DWG ให้เปิด FrmMain (ค่าเริ่มต้น)
                    FrmMain mainForm = new FrmMain(loginForm.LoggedInUserName);
                    Application.Run(mainForm);
                }
            }
            else
            {
                // ถ้า Login ไม่สำเร็จหรือกดยกเลิก ให้ออกจากโปรแกรม
                Application.Exit();
            }
        }
    }
}
